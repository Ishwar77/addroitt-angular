(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{JI69:function(t,e,i){"use strict";i.r(e),i.d(e,"ProfileFormPageModule",function(){return E});var n=i("ofXK"),o=i("3Pt+"),a=i("TEn/"),r=i("tyNb"),c=i("mrSG"),s=i("FUe0"),l=i("dTEF");const b=Object(s.d)("Camera",{web:()=>i.e(24).then(i.bind(null,"wzPO")).then(t=>new t.CameraWeb)});var d,u,p=i("k0NA");!function(t){t.Documents="DOCUMENTS",t.Data="DATA",t.Cache="CACHE",t.External="EXTERNAL",t.ExternalStorage="EXTERNAL_STORAGE"}(d||(d={})),function(t){t.UTF8="utf8",t.ASCII="ascii",t.UTF16="utf16"}(u||(u={}));const g=Object(s.d)("Filesystem",{web:()=>i.e(25).then(i.bind(null,"B5q2")).then(t=>new t.FilesystemWeb)});var h=i("fXoL"),f=i("ej43");function m(t,e){if(1&t&&h.Lb(0,"img",26),2&t){const t=h.bc(2);h.ec("src",t.croppedImage,h.lc)}}function P(t,e){1&t&&(h.Pb(0,"ion-button",27),h.pc(1," Next"),h.Ob())}const O=function(t,e){return{male:t,female:e}};function v(t,e){if(1&t){const t=h.Qb();h.Pb(0,"div"),h.Pb(1,"ion-text",9),h.Pb(2,"h4",10),h.pc(3,"Personal Details"),h.Ob(),h.Ob(),h.Pb(4,"form",11),h.Xb("ngSubmit",function(){h.kc(t);const e=h.bc();return e.setProfileFirst(e.user_list[0].idstudent_details)}),h.Pb(5,"div",12),h.Pb(6,"ion-radio-group",13),h.Xb("ionChange",function(e){return h.kc(t),h.bc().radioGroupChange(e)}),h.Pb(7,"ion-grid"),h.Pb(8,"ion-row"),h.Pb(9,"ion-col",14),h.Pb(10,"ion-item",15),h.Lb(11,"ion-radio",16),h.Pb(12,"ion-label"),h.pc(13,"Male"),h.Ob(),h.Ob(),h.Ob(),h.Pb(14,"ion-col",14),h.Pb(15,"ion-item",15),h.Lb(16,"ion-radio",17),h.Pb(17,"ion-label"),h.pc(18,"Female"),h.Ob(),h.Ob(),h.Ob(),h.Ob(),h.Ob(),h.Ob(),h.Ob(),h.Pb(19,"div"),h.Pb(20,"div",18),h.oc(21,m,1,1,"img",19),h.Ob(),h.Ob(),h.Pb(22,"ion-button",20),h.Xb("click",function(){return h.kc(t),h.bc().openCameraOrGallery()}),h.Lb(23,"ion-icon",21),h.pc(24," Upload Your Photo "),h.Ob(),h.Pb(25,"div",22),h.Pb(26,"ion-item"),h.Lb(27,"ion-icon",23),h.Lb(28,"ion-datetime",24),h.Ob(),h.Ob(),h.oc(29,P,2,0,"ion-button",25),h.Ob(),h.Ob()}if(2&t){const t=h.bc();h.Ab(4),h.ec("formGroup",t.myform),h.Ab(16),h.ec("ngClass",h.gc(4,O,!t.selectedRadioGroup||"M"==t.selectedRadioGroup,"F"==t.selectedRadioGroup)),h.Ab(1),h.ec("ngIf",t.croppedImage),h.Ab(8),h.ec("ngIf",t.step<3)}}function _(t,e){if(1&t&&(h.Pb(0,"ion-select-option",37),h.pc(1),h.Ob()),2&t){const t=e.$implicit;h.ec("value",t.idstate),h.Ab(1),h.rc("",t.state," ")}}function x(t,e){if(1&t&&(h.Pb(0,"ion-select-option",37),h.pc(1),h.Ob()),2&t){const t=e.$implicit;h.ec("value",t.idcity),h.Ab(1),h.qc(t.city)}}function y(t,e){1&t&&(h.Pb(0,"ion-button",27),h.pc(1," Next"),h.Ob())}function C(t,e){if(1&t){const t=h.Qb();h.Pb(0,"div"),h.Pb(1,"ion-text",28),h.Pb(2,"h4",10),h.pc(3,"Current Address"),h.Ob(),h.Ob(),h.Pb(4,"form",11),h.Xb("ngSubmit",function(){return h.kc(t),h.bc().setProfileSecond()}),h.Pb(5,"div",29),h.Pb(6,"ion-item"),h.Lb(7,"ion-input",30),h.Ob(),h.Ob(),h.Pb(8,"div",31),h.Pb(9,"ion-item"),h.Lb(10,"ion-input",32),h.Ob(),h.Ob(),h.Pb(11,"div",31),h.Pb(12,"ion-item"),h.Pb(13,"ion-label"),h.pc(14,"State"),h.Ob(),h.Pb(15,"ion-select",33),h.oc(16,_,2,2,"ion-select-option",34),h.Ob(),h.Ob(),h.Ob(),h.Pb(17,"div",31),h.Pb(18,"ion-item"),h.Pb(19,"ion-label"),h.pc(20,"City"),h.Ob(),h.Pb(21,"ion-select",35),h.oc(22,x,2,2,"ion-select-option",34),h.Ob(),h.Ob(),h.Ob(),h.Pb(23,"div",31),h.Pb(24,"ion-item"),h.Lb(25,"ion-input",36),h.Ob(),h.Ob(),h.oc(26,y,2,0,"ion-button",25),h.Ob(),h.Ob()}if(2&t){const t=h.bc();h.Ab(4),h.ec("formGroup",t.myformSecond),h.Ab(12),h.ec("ngForOf",t.state_list),h.Ab(6),h.ec("ngForOf",t.city_list),h.Ab(4),h.ec("ngIf",t.step<3)}}function w(t,e){if(1&t&&(h.Pb(0,"ion-select-option",37),h.pc(1),h.Ob()),2&t){const t=e.$implicit;h.ec("value",t),h.Ab(1),h.rc(" ",t.state," ")}}function S(t,e){if(1&t){const t=h.Qb();h.Pb(0,"ion-select",43),h.Xb("ionChange",function(e){return h.kc(t),h.bc(2).getIState(e)}),h.oc(1,w,2,2,"ion-select-option",34),h.Ob()}if(2&t){const t=h.bc(2);h.Ab(1),h.ec("ngForOf",t.state_list)}}function A(t,e){if(1&t){const t=h.Qb();h.Pb(0,"ion-chip",44),h.Pb(1,"ion-label"),h.pc(2),h.Ob(),h.Pb(3,"ion-icon",45),h.Xb("click",function(){h.kc(t);const i=e.$implicit;return h.bc(2).removeState(i)}),h.Ob(),h.Ob()}if(2&t){const t=e.$implicit;h.Ab(2),h.qc(t)}}function k(t,e){if(1&t&&(h.Pb(0,"ion-select-option",37),h.pc(1),h.Ob()),2&t){const t=e.$implicit;h.ec("value",t),h.Ab(1),h.rc(" ",t.language," ")}}function L(t,e){if(1&t){const t=h.Qb();h.Pb(0,"ion-select",43),h.Xb("ionChange",function(e){return h.kc(t),h.bc(2).getILanguage(e)}),h.oc(1,k,2,2,"ion-select-option",34),h.Ob()}if(2&t){const t=h.bc(2);h.Ab(1),h.ec("ngForOf",t.lang_list)}}function I(t,e){if(1&t){const t=h.Qb();h.Pb(0,"ion-chip",44),h.Pb(1,"ion-label"),h.pc(2),h.Ob(),h.Pb(3,"ion-icon",45),h.Xb("click",function(){h.kc(t);const i=e.$implicit;return h.bc(2).removeLang(i)}),h.Ob(),h.Ob()}if(2&t){const t=e.$implicit;h.Ab(2),h.qc(t)}}function M(t,e){if(1&t){const t=h.Qb();h.Pb(0,"ion-button",46),h.Xb("click",function(){h.kc(t);const e=h.bc(2);return e.profileSubmit(e.user_list[0].idstudent_details)}),h.pc(1,"Submit"),h.Ob()}}function F(t,e){if(1&t){const t=h.Qb();h.Pb(0,"div"),h.Pb(1,"ion-item"),h.Pb(2,"ion-list-header"),h.pc(3,"Basic"),h.Ob(),h.Pb(4,"ion-icon",38),h.Xb("click",function(){return h.kc(t),h.bc().setLocation()}),h.Ob(),h.Ob(),h.Pb(5,"form"),h.Pb(6,"p",39),h.oc(7,S,2,1,"ion-select",40),h.oc(8,A,4,1,"ion-chip",41),h.Ob(),h.Pb(9,"ion-item"),h.Pb(10,"ion-list-header"),h.pc(11,"Languages Known"),h.Ob(),h.Pb(12,"ion-icon",38),h.Xb("click",function(){return h.kc(t),h.bc().setLanguage()}),h.Ob(),h.Ob(),h.Pb(13,"p",39),h.oc(14,L,2,1,"ion-select",40),h.oc(15,I,4,1,"ion-chip",41),h.Ob(),h.oc(16,M,2,0,"ion-button",42),h.Ob(),h.Ob()}if(2&t){const t=h.bc();h.Ab(7),h.ec("ngIf",t.location),h.Ab(1),h.ec("ngForOf",t.states),h.Ab(6),h.ec("ngIf",t.language),h.Ab(1),h.ec("ngForOf",t.languages),h.Ab(1),h.ec("ngIf",t.step>=3)}}const T=function(t){return{done:t}},D=[{path:"",component:(()=>{class t{constructor(t,e,i,n){this.fb=t,this.modalController=e,this.authService=i,this.router=n,this.step=1,this.location=!1,this.language=!1,this.photos=[],this.isItemAvailable=!1,this.states=[],this.state=[],this.languages=[],this.lang=[],this.convertBlobToBase64=t=>new Promise((e,i)=>{const n=new FileReader;n.onerror=i,n.onload=()=>{e(n.result)},n.readAsDataURL(t)})}nextStep(){this.step<4&&(this.step=this.step+1,console.log(this.step))}ngOnInit(){this.Studentid=this.authService.getStudentId(),console.log(this.Studentid),this.getStudentList(),this.getUser(this.Studentid),this.getStates(),this.getCity(),this.getLanguage(),this.myform=this.fb.group({gender:["M",[o.l.required]],DOB:["",[o.l.required]],profile_image:this.croppedImage}),this.myformSecond=this.fb.group({permenant_address_1:["",[o.l.required]],permanant_address_2:["",[o.l.required]],idstate_cl:["",[o.l.required]],idcity_cl:["",[o.l.required]],pincode_permanant:["",[o.l.required]],idstudent_details:this.Studentid})}openCameraOrGallery(){return Object(c.a)(this,void 0,void 0,function*(){const t=yield b.getPhoto({quality:90,allowEditing:!1,resultType:l.b.Uri,source:l.c.Prompt}),e=yield this.savePicture(t);this.photos.unshift(e),this.photos.unshift({filepath:"soon...",webviewPath:t.webPath}),this.imageDataUrl=t.webPath,this.presentModal()})}presentModal(){return Object(c.a)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:p.a,cssClass:"my-custom-class",componentProps:{image:this.imageDataUrl}});return t.onDidDismiss().then(t=>{this.croppedImage=t.data}),yield t.present()})}radioGroupChange(t){console.log("radioGroupChange",t.detail.value),this.selectedRadioGroup=t.detail.value}getUser(t){this.authService.getuser(t).subscribe(t=>{this.user_list=t})}getStudentList(){this.authService.getStudentList().subscribe(t=>{this.student_list=t})}setProfileFirst(t){console.log("profile form"),this.myform.invalid||(this.authService.setProfileFirst(t,this.myform.value.gender,this.myform.value.DOB.substring(0,10)).subscribe(),this.nextStep())}setProfileSecond(){this.myformSecond.invalid||(this.authService.setProfileSecond(this.myformSecond.value).subscribe(),console.log("profile created successfully"),this.nextStep())}getStates(){this.state_list_sub=this.authService.getStateList().subscribe(t=>{this.state_list=t})}getCity(){this.authService.getCityList().subscribe(t=>{this.city_list=t})}getLanguage(){this.authService.getLanguageList().subscribe(t=>{this.lang_list=t})}setLocation(){this.location=!0,this.language=!1}setLanguage(){this.language=!0,this.location=!1}getIState(t){this.state.push(t.target.value),this.states.push(t.target.value.state)}removeState(t){const e=this.states.indexOf(t),i=this.state.indexOf(t);e>=0&&(this.states.splice(e,1),this.state.splice(i,1))}getILanguage(t){this.lang.push(t.target.value),this.languages.push(t.target.value.language)}removeLang(t){const e=this.languages.indexOf(t),i=this.lang.indexOf(t);e>=0&&(this.languages.splice(e,1),this.lang.splice(i,1))}profileThird(){this.language_1=this.lang[0].idlanguage,this.language_2=this.lang[1].idlanguage,this.language_3=this.lang[2].idlanguage,this.Preffered_location_1=this.state[0].idstate,this.Preffered_location_2=this.state[1].idstate,this.Preffered_location_3=this.state[2].idstate}profileSubmit(t){this.profileThird(),this.myformThird=this.fb.group({Preffered_location_1:this.Preffered_location_1,Preffered_location_2:this.Preffered_location_2,Preffered_location_3:this.Preffered_location_3,language_1:this.language_1,language_2:this.language_2,language_3:this.language_3}),this.myformThird.invalid||(this.authService.setProfileThird(t,this.myformThird.value).subscribe(),console.log("profile submit sucessfull"),this.router.navigate(["/login"]))}savePicture(t){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this.readAsBase64(t),i=(new Date).getTime()+".jpeg";return yield g.writeFile({path:i,data:e,directory:d.Data}),{filepath:i,webviewPath:t.webPath}})}readAsBase64(t){return Object(c.a)(this,void 0,void 0,function*(){const e=yield fetch(t.webPath),i=yield e.blob();return yield this.convertBlobToBase64(i)})}}return t.\u0275fac=function(e){return new(e||t)(h.Kb(o.a),h.Kb(a.P),h.Kb(f.a),h.Kb(r.g))},t.\u0275cmp=h.Eb({type:t,selectors:[["app-profile-form"]],decls:13,vars:11,consts:[[1,"ion-text-center","ion-padding",3,"fullscreen"],["color","medium"],[1,"step-text"],[4,"ngIf"],[1,"ion-text-center","ion-padding","ion-no-border"],[1,"button-group","ion-padding-top","ion-padding-bottom"],[1,"dots","ion-margin-bottom","ion-margin-top"],[1,"done"],[3,"ngClass"],["color","primary"],[1,"ion-margin-bottom"],[3,"formGroup","ngSubmit"],[1,"radio-div","ion-margin-bottom"],["allow-empty-selection","true","name","radio-group","formControlName","gender",3,"ionChange"],["size","6"],["lines","none"],["mode","md","item-right","","value","M",1,"ion-margin-end"],["mode","md","item-left","","value","F",1,"ion-margin-end"],[1,"img-wrapper",3,"ngClass"],[3,"src",4,"ngIf"],["fill","clear",1,"ion-margin-bottom","ion-text-capitalize",3,"click"],["slot","icon-only","name","camera","color","primary",1,"ion-margin-end"],[1,"input-group","ion-margin-top","ion-margin-bottom"],["name","calendar","slot","end","color","medium"],["value","","type","Date","placeholder","Date of Birth","formControlName","DOB","display-timezone","utc","min","1974","max","2004"],["type","submit","color","primary","shape","round","size","large","expand","block","class","ion-text-capitalize",4,"ngIf"],[3,"src"],["type","submit","color","primary","shape","round","size","large","expand","block",1,"ion-text-capitalize"],["color","primary ion-margin-bottom"],[1,"input-group","ion-margin-top"],["placeholder","Address Line 1","formControlName","permenant_address_1"],[1,"input-group"],["placeholder","Address Line 2","formControlName","permanant_address_2"],["value","notifications","interface","action-sheet","formControlName","idstate_cl"],[3,"value",4,"ngFor","ngForOf"],["value","notifications","interface","action-sheet","formControlName","idcity_cl"],["placeholder","Pin Code","formControlName","pincode_permanant"],[3,"value"],["slot","end","color","primary","name","add-outline",3,"click"],[1,"ion-text-left","ion-padding"],["value","notifications","placeholder","select location","interface","action-sheet",3,"ionChange",4,"ngIf"],["outline","","color","medium",4,"ngFor","ngForOf"],["color","primary","shape","round","size","large","expand","block","class","ion-text-capitalize",3,"click",4,"ngIf"],["value","notifications","placeholder","select location","interface","action-sheet",3,"ionChange"],["outline","","color","medium"],["name","close-outline",3,"click"],["color","primary","shape","round","size","large","expand","block",1,"ion-text-capitalize",3,"click"]],template:function(t,e){1&t&&(h.Pb(0,"ion-content",0),h.Pb(1,"ion-text",1),h.Pb(2,"p",2),h.pc(3),h.Ob(),h.Ob(),h.oc(4,v,30,7,"div",3),h.oc(5,C,27,4,"div",3),h.oc(6,F,17,5,"div",3),h.Ob(),h.Pb(7,"ion-footer",4),h.Lb(8,"div",5),h.Pb(9,"div",6),h.Lb(10,"span",7),h.Lb(11,"span",8),h.Lb(12,"span",8),h.Ob(),h.Ob()),2&t&&(h.ec("fullscreen",!0),h.Ab(3),h.rc("Step ",e.step," of 3"),h.Ab(1),h.ec("ngIf",1==e.step),h.Ab(1),h.ec("ngIf",2==e.step),h.Ab(1),h.ec("ngIf",3==e.step),h.Ab(5),h.ec("ngClass",h.fc(7,T,e.step>=2)),h.Ab(1),h.ec("ngClass",h.fc(9,T,e.step>=3)))},directives:[a.n,a.I,n.j,a.p,n.h,o.m,o.h,o.c,a.y,a.T,o.g,o.b,a.q,a.A,a.m,a.u,a.x,a.R,a.v,a.e,a.s,a.o,a.t,a.U,a.B,n.i,a.C,a.w,o.i,a.l],styles:[".container[_ngcontent-%COMP%]{width:150px;height:150px;display:block;margin:0 auto}.radio-div[_ngcontent-%COMP%]{max-width:310px;margin-right:auto;margin-left:auto}.profile-pic[_ngcontent-%COMP%]{width:150px;height:150px}.outer[_ngcontent-%COMP%]{width:100%!important;height:100%!important;max-width:150px!important;max-height:150px!important;margin:auto;position:relative;background-size:150px 150px}.inner[_ngcontent-%COMP%], .outer[_ngcontent-%COMP%]{border-radius:100%}.inner[_ngcontent-%COMP%]{background-color:#075e54;width:45px;height:45px;position:absolute;bottom:0;right:0;display:flex;align-items:center;justify-content:center}.camera-icon[_ngcontent-%COMP%]{height:30px;width:30px;color:#fff}ion-avatar[_ngcontent-%COMP%]{width:100px;height:100px;border:4px solid #2159e6;box-shadow:0 0 0 3px #3dc2ff}.img-wrapper[_ngcontent-%COMP%]{border-radius:50%;width:160px;height:160px;overflow:hidden;display:inline-block;background:#99aadb;border:4px solid #99aadb}.img-wrapper.male[_ngcontent-%COMP%]{--background:url(avatar-male.437237d972d749f0d86d.jpg) 0 0/100% 100% no-repeat;background:url(avatar-male.437237d972d749f0d86d.jpg) 0 0/100% 100% no-repeat}.img-wrapper.female[_ngcontent-%COMP%]{--background:url(avatar-female.00b63113c8c4f7b3a923.jpg) 0 0/100% 100% no-repeat;background:url(avatar-female.00b63113c8c4f7b3a923.jpg) 0 0/100% 100% no-repeat}.img-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;--background:#99aadb;background:#99aadb}ion-item[_ngcontent-%COMP%]{--border-color:var(--ion-color-light,#fff)}.step-text[_ngcontent-%COMP%]{font-size:12px}.dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:10px;height:10px;background:#dadada;display:inline-block;border-radius:50%;margin:0 10px}.dots[_ngcontent-%COMP%]   span.done[_ngcontent-%COMP%]{--background:var(--ion-color-primary);background:var(--ion-color-primary);--box-shadow:2px 6px 6px 0 #c0def5;box-shadow:2px 6px 6px 0 #c0def5}"]}),t})()}];let j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.Ib({type:t}),t.\u0275inj=h.Hb({imports:[[r.i.forChild(D)],r.i]}),t})(),E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.Ib({type:t}),t.\u0275inj=h.Hb({imports:[[n.b,o.d,a.M,j,o.j]]}),t})()},dTEF:function(t,e,i){"use strict";var n,o,a;i.d(e,"c",function(){return n}),i.d(e,"a",function(){return o}),i.d(e,"b",function(){return a}),function(t){t.Prompt="PROMPT",t.Camera="CAMERA",t.Photos="PHOTOS"}(n||(n={})),function(t){t.Rear="REAR",t.Front="FRONT"}(o||(o={})),function(t){t.Uri="uri",t.Base64="base64",t.DataUrl="dataUrl"}(a||(a={}))}}]);